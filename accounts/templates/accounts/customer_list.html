{% extends 'store/base.html' %}

{% block content %}
<!-- Header Section -->
<div class="container my-4">
    <div class="card shadow-sm rounded p-4">
        <div class="row align-items-center g-3">
            <div class="col-12 col-md-6">
                <h4 class="display-6 text-success text-center text-md-start">Customers</h4>
            </div>
            <div class="col-12 col-md-6 text-center text-md-end">
                <a class="btn btn-success btn-sm rounded-pill shadow-sm" href="{% url 'customer_create' %}">
                    <i class="fa-solid fa-plus"></i> Add New Customer
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Table Section -->
<div class="container mb-5">
    <div class="table-responsive shadow-sm rounded">
        <style>
            .table th, .table td {
                text-align: center;
                vertical-align: middle;
                white-space: nowrap;
            }

            /* Responsive table adjustments for mobile */
            @media (max-width: 768px) {
                .table th, .table td {
                    white-space: normal;
                    font-size: 0.9rem;
                }
                .table thead {
                    display: none;
                }
                .table, .table tbody, .table tr, .table td {
                    display: block;
                    width: 100%;
                }
                .table tr {
                    margin-bottom: 1rem;
                    border: 1px solid #dee2e6;
                    border-radius: 0.5rem;
                    padding: 0.5rem;
                    background-color: #fff;
                }
                .table td {
                    text-align: left;
                    padding: 0.5rem 0.75rem;
                    position: relative;
                }
                .table td::before {
                    content: attr(data-label);
                    font-weight: 600;
                    display: block;
                    margin-bottom: 0.25rem;
                    color: #6c757d;
                }
            }
        </style>

        <table class="table table-striped table-bordered align-middle">
            <thead class="table-light">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">Address</th>
                    <th scope="col">Email</th>
                    <th scope="col">Phone</th>
                    <th scope="col">Gstin</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for customer in customers %}
                <tr>
                    <td data-label="#"> {{ forloop.counter }} </td>
                    <td data-label="First Name">{{ customer.first_name }}</td>
                    <td data-label="Last Name">{{ customer.last_name }}</td>
                    <td data-label="Address">{{ customer.address }}</td>
                    <td data-label="Email">{{ customer.email }}</td>
                    <td data-label="Phone">{{ customer.phone }}</td>
                    <td data-label="Gstin">{{ customer.gstin }}</td>
                    <td data-label="Actions">
                        <div class="d-flex flex-column flex-sm-row justify-content-center gap-2">
                            <a href="{% url 'customer_update' customer.pk %}" class="btn btn-outline-primary btn-sm w-100 w-sm-auto">
                                <i class="fas fa-edit"></i> Edit
                            </a>
                            <a href="{% url 'customer_delete' customer.pk %}" class="btn btn-outline-danger btn-sm w-100 w-sm-auto">
                                <i class="fas fa-trash-alt"></i> Delete
                            </a>
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="8" class="text-center text-muted">No customers found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% extends "store/base.html" %}
{% block title %}Add Expense{% endblock %}
{% block content %}
<div class="container py-4">
    <h4 class="mb-4">Add Expense</h4>
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="date" class="form-label">Date</label>
            <input type="date" class="form-control" name="date" id="date" required>
        </div>
        <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" name="name" id="name" required>
        </div>
        <div class="mb-3">
            <label for="amount" class="form-label">Amount</label>
            <input type="number" step="0.01" class="form-control" name="amount" id="amount" required>
        </div>
        <div class="mb-3">
            <label for="category" class="form-label">Category</label>
            <select class="form-select" name="category" id="category" required>
                <option value="office">Office</option>
                <option value="travel">Travel</option>
                <option value="salary">Salary</option>
                <option value="other">Other</option>
            </select>
        </div>
        <div class="mb-3" id="new-category-div" style="display:none;">
            <label for="new_category" class="form-label">New Category</label>
            <input type="text" class="form-control" name="new_category" id="new_category" placeholder="Enter new category">
        </div>
        <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea class="form-control" name="description" id="description" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-success">Add Expense</button>
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var categorySelect = document.getElementById('category');
        var newCategoryDiv = document.getElementById('new-category-div');
        categorySelect.addEventListener('change', function() {
            if (this.value === 'other') {
                newCategoryDiv.style.display = 'block';
                document.getElementById('new_category').required = true;
            } else {
                newCategoryDiv.style.display = 'none';
                document.getElementById('new_category').required = false;
            }
        });
    });
</script>
{% endblock %}

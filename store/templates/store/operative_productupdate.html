{% extends "store/base.html" %}
{% load static %}

{% block title %}
Update Product
{% endblock title %}

{% block content %}

<style>
/* ------------------------------
   GLOBAL DARK THEME
--------------------------------*/
body {
    background: #0d1117;
    color: #e6edf3;
    font-family: "Inter", sans-serif;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
}

/* ------------------------------
   LAYOUT
--------------------------------*/
.container {
    margin-top: 20px;
}

/* Column titles */
.text-center {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 12px;
    color: #58a6ff;
}

/* ------------------------------
   CARDS
--------------------------------*/
.card {
    background: #161b22 !important;
    border: 1px solid #30363d !important;
    border-radius: 14px !important;
    padding: 20px;
    color: #e6edf3;
    box-shadow: 0 0 12px rgba(0,0,0,0.4);
}

/* ------------------------------
   FORM ELEMENTS
--------------------------------*/
.form-label {
    font-weight: 500;
    color: #c9d1d9;
}

.form-control, select, input[type="text"], input[type="number"] {
    background: #0d1117;
    border: 1px solid #30363d;
    color: #e6edf3;
    border-radius: 10px;
    padding: 8px 12px;
    transition: 0.25s ease;
}

.form-control:focus {
    background: #0d1117;
    border-color: #58a6ff;
    box-shadow: 0 0 0 3px rgba(88,166,255,0.3);
    color: white;
}

select option {
    background: #0d1117;
    color: #e6edf3;
    border-radius: 8px;
}

/* ------------------------------
   BUTTONS
--------------------------------*/
.btn-success {
    background: #238636;
    border-radius: 10px;
    border: none;
    font-weight: 600;
    transition: 0.2s ease;
}

.btn-success:hover {
    background: #2ea043;
    transform: translateY(-1px);
    box-shadow: 0 0 10px rgba(46,160,67,0.4);
}

/* ------------------------------
   ERROR TEXT
--------------------------------*/
.text-danger {
    color: #ff6b6b !important;
    font-size: 13px;
    margin-top: 4px;
}

/* ------------------------------
   ROW SPACING
--------------------------------*/
.row {
    margin-bottom: 15px;
}

/* Column box */
.col-sm.form-control {
    background: #161b22 !important;
    border-radius: 12px;
    border: 1px solid #30363d;
    padding: 20px;
    box-shadow: inset 0 0 6px rgba(0,0,0,0.4);
}
</style>

<br>
<div class="container">
    <div class="row align-items-stretch">
        <div class="col-sm mt-5 form-control">
            <div class="text-center">IN - Solv-IT Raw Parts</div>
            <div class="col-lg-12 col-md-5 h-70">
                <div class="card shadow-sm border-dark form-control h-100 d-flex flex-column" style="background-color: #a9a5b2;">
                    <div class="card-body flex-fill">
                        <form method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="row mb-3">
                                <!-- Product Name and Serial No (Two columns) -->
                                <div class="col-md-6 col-lg-6">
                                    <label for="{{ form.name.id_for_label }}" class="form-label">
                                        Product Name
                                    </label>
                                    <input type="text" name="name" id="product_name" class="form-control"
                                        placeholder="Enter Product Name" value="{{ form.name.value }}">
                                    <div class="text-danger">{{ form.name.errors }}</div>
                                </div>

                                <div class="col-md-6 col-lg-6">
                                    <label for="{{ form.make_and_models.id_for_label }}" class="form-label">
                                        Make & Models
                                    </label>
                                    <input type="text" name="make_and_models" id="make_and_models" class="form-control"
                                        placeholder="Enter Make & Models" value="{{ form.make_and_models.value }}"
                                         style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.make_and_models.errors }}</div>

                                </div>
                            </div>

                            <div class="row mb-3">
                                <!-- Make & Models (Full width, below the first two columns) -->
                                <div class="col-md-12 col-lg-12">
                                    <label for="{{ form.serialno.id_for_label }}" class="form-label">
                                        Serial No
                                    </label>
                                    <input type="text" name="serialno" id="serial_no" class="form-control"
                                        placeholder="Enter Serial Number" value="{{ form.serialno.value }}" style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.serialno.errors }}</div>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <!-- Reduced width for Processor, RAM, HDD, and SSD details -->
                                <div class="col-md-6 col-lg-8">
                                    <label for="processor_generation" class="form-label">Select Generation</label>
                                    <select id="processor_generation" class="form-control" onchange="filterProcessorsByGeneration()">
                                        <option value="">-Select Generation-</option>
                                        {% for generation, options in processor_by_generation.items %}
                                            {% if options %}
                                                <option value="{{ generation }}">{{ generation }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                    <label for="processor" class="form-label">Processor Details</label>
                                    <select id="processor" name="processor" class="form-control">
                                        <option value="">-Select Processor-</option>
                                        {% for generation, options in processor_by_generation.items %}
                                            {% if options %}
                                            {% for option in options %}
                                                <option data-generation="{{ generation }}" value="{{ option }}">{{ option }}</option>
                                            {% endfor %}
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                    
                                    <div class="text-danger">{{ form.processor.errors }}</div>
                                </div>



                                <div class="col-md-6 col-lg-3">
                                    <label for="processor_qty" class="form-label">Qty</label>
                                    <input type="text" id="processor_qty" name="processor_qty" class="form-control"
                                        value="{{ form.processor_qty.value }}">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6 col-lg-8">
                                    <label for="ram_size" class="form-label">RAM Size</label>
                                    <select id="ram_size" class="form-control" onchange="filterComponentBySizeram()">
                                        <option value="">-Select RAM Size-</option>
                                        {% for size, options in rambysize.items %}
                                            <option value="{{ size }}">{{ size }}</option>
                                        {% endfor %}
                                    </select>
                                
                                    <label for="ram" class="form-label">RAM Details</label>
                                    <select id="ram" name="ram" class="form-control">
                                        <option value="">-Select RAM-</option>
                                        {% for size, options in rambysize.items %}
                                            {% for option in options %}
                                                <option data-size="{{ size }}" value="{{ option }}">{{ option }}</option>
                                            {% endfor %}
                                        {% endfor %}
                                    </select>                   
                                
                                    <div class="text-danger">{{ form.ram.errors }}</div>
                                </div>

                                <div class="col-md-6 col-lg-3">
                                    <label for="ram_qty" class="form-label">Qty</label>
                                    <input type="text" id="ram_qty" name="ram_qty" class="form-control"
                                        value="{{ form.ram_qty.value }}">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6 col-lg-8">
                                    <label for="hdd_size" class="form-label">HDD Size</label>
                                    <select id="hdd_size" class="form-control" onchange="filterComponentBySizehdd()">
                                        <option value="">-Select HDD Size-</option>
                                        {% for size, options in hddbysize.items %}
                                            <option value="{{ size }}">{{ size }}</option>
                                        {% endfor %}
                                    </select>
                                    <label for="hdd" class="form-label">HDD Details</label>
                                    <select id="hdd" name="hdd" class="form-control">
                                        <option value="">-Select HDD-</option>
                                        {% for size, options in hddbysize.items %}
                                            {% for option in options %}
                                                <option data-size="{{ size }}" value="{{ option }}">{{ option }}</option>
                                            {% endfor %}
                                        {% endfor %}
                                    </select>    
                                    <div class="text-danger">{{ form.hdd.errors }}</div>
                                </div>

                                <div class="col-md-6 col-lg-3">
                                    <label for="hdd_qty" class="form-label">Qty</label>
                                    <input type="text" id="hdd_qty" name="hdd_qty" class="form-control"
                                        value="{{ form.hdd_qty.value }}">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6 col-lg-8">
                                    <label for="ssd_size" class="form-label">SSD Size</label>
                                    <select id="ssd_size" class="form-control" onchange="filterComponentBySizessd()">
                                        <option value="">-Select SSD Size-</option>
                                        {% for size, options in ssdbysize.items %}
                                            <option value="{{ size }}">{{ size }}</option>
                                        {% endfor %}
                                    </select>
                                    <label for="ssd" class="form-label">SSD Details</label>
                                    <select id="ssd" name="ssd" class="form-control">
                                        <option value="">-Select SSD-</option>
                                        {% for size, options in ssdbysize.items %}
                                            {% for option in options %}
                                                <option data-size="{{ size }}" value="{{ option }}">{{ option }}</option>
                                            {% endfor %}
                                        {% endfor %}
                                    </select>
                                    <div class="text-danger">{{ form.ssd.errors }}</div>
                                </div>

                                <div class="col-md-6 col-lg-3">
                                    <label for="ssd_qty" class="form-label">Qty</label>
                                    <input type="text" id="ssd_qty" name="ssd_qty" class="form-control"
                                        value="{{ form.ssd_qty.value }}">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="price" class="form-label">Price</label>
                                    <input type="text" id="price" name="price" class="form-control"
                                        value="{{ form.price.value }}"   style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.price.errors }}</div>
                                </div>

                                <div class="col-md-6">
                                    <label for="{{ form.purchased_type.id_for_label }}" class="form-label" placeholder="Enter Purchase / LOT Code">
                                        Purchase Type
                                    </label>
                                    <input type="text" id="purchased_type" name="purchased_type" class="form-control"
                                        value="{{ form.purchased_type.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.purchased_type.errors }}</div>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="{{ form.purchased_code.id_for_label }}" class="form-label" placeholder="Enter Purchase / LOT Code">
                                        Purchase / LOT Code
                                    </label>
                                    <input type="text" id="purchased_code" name="purchased_code" class="form-control"
                                        value="{{ form.purchased_code.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.purchased_code.errors }}</div>
                                </div>
                            </div>

                            <!-- SMPS Status -->
                            <div class="col-md-6 col-lg-8">
                                <label for="smps_status" class="form-label">SMPS / Adapter Status</label>
                                <select id="smps_status1" name="smps_status" class="form-control" onchange="toggleReplacementDescription1()">
                                    <option value="NA" {% if form.smps_status.value == 'NA' %}selected{% endif %}>NA</option>
                                    <option value="available" {% if form.smps_status.value == 'available' %}selected{% endif %}>Available</option>
                                    <option value="not available" {% if form.smps_status.value == 'not available' %}selected{% endif %}>Not Available</option>
                                    <option value="Replacement" {% if form.smps_status.value == 'Replacement' %}selected{% endif %}>Replacement</option>


                                </select>
                                <div class="text-danger">{{ form.smps_status.errors }}</div>
                            </div>



                            <!-- Motherboard Status -->
                            <div class="col-md-6 col-lg-8" id="motherboard_status_div">
                                <label for="motherboard_status" class="form-label">Motherboard Status</label>
                                <select id="motherboard_status1" name="motherboard_status" class="form-control" onchange="toggleMotherboardReplacementDescription1()">
                                    <option value="NA" {% if form.motherboard_status.value == 'NA' %}selected{% endif %}>NA</option>
                                    <option value="available" {% if form.motherboard_status.value == 'available' %}selected{% endif %}>Available</option>
                                    <option value="not available" {% if form.motherboard_status.value == 'not available' %}selected{% endif %}>Not Available</option>
                                    <option value="Replacement" {% if form.motherboard_status.value == 'Replacement' %}selected{% endif %}>Replacement</option>
                                </select>
                                <div class="text-danger">{{ form.motherboard_status.errors }}</div>
                            </div>
                
                            <br>
                            <div class="form-group text-center">
                                <button class="btn btn-success btn-lg form-control" name="button1"  type="submit">
                                    <i class="fas fa-check"></i> Submit
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm mt-5 form-control">
            <div class="text-center">Current Details</div>
            <div class="col-lg-12 col-md-5 h-100">
                <div class="card shadow-sm border-dark form-control h-100 d-flex flex-column" style="background-color: #a9a5b2;">
                    <div class="card-body flex-fill">
                        <form method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="row mb-3">
                                <!-- Product Name and Serial No (Two columns) -->
                                <div class="col-md-6 col-lg-6">
                                    <label for="{{ form.name.id_for_label }}" class="form-label">
                                        Product Name
                                    </label>
                                    <input type="text" name="name" id="product_name" class="form-control"
                                        placeholder="Enter Product Name" value="{{ form.name.value }}">
                                    <div class="text-danger">{{ form.name.errors }}</div>
                                </div>

                                <div class="col-md-6 col-lg-6">
                                    <label for="{{ form.make_and_models.id_for_label }}" class="form-label">
                                        Make & Models
                                    </label>
                                    <input type="text" name="make_and_models" id="make_and_models" class="form-control"
                                        placeholder="Enter Make & Models" value="{{ form.make_and_models.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.make_and_models.errors }}</div>

                                </div>
                            </div>

                            <div class="row mb-3">
                                <!-- Make & Models (Full width, below the first two columns) -->
                                <div class="col-md-12 col-lg-12">
                                    <label for="{{ form.serialno.id_for_label }}" class="form-label">
                                        Serial No
                                    </label>
                                    <input type="text" name="serialno" id="serialno" class="form-control"
                                        placeholder="Enter Serial Number" value="{{ form.serialno.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.serialno.errors }}</div>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <!-- Reduced width for Processor, RAM, HDD, and SSD details -->
                                <div class="col-md-6 col-lg-9">
                                    <label for="processor" class="form-label">
                                        Processor Details
                                    </label>
                                    <select id="processor" name="processor" class="form-control">
                                        {% for option in processor_option2 %}
                                            <option value="{{ option }}">{{ option }}</option>
                                        {% empty %}
                                            <option value="">No processor available</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <!-- <div class="col-md-6 col-lg-4">
                                    <label for="processor_qty" class="form-label">Qty</label>
                                    <input type="number" id="processor_qty" name="processor_qty" class="form-control"
                                        value="{{ form.processor_qty.value }}">
                                </div> -->
                            </div>
                            
                            
                            <div class="row mb-3">
                                <div class="col-md-6 col-lg-9">
                                    <label for="ram" class="form-label">
                                        RAM Details
                                    </label>
                                    <select id="ram" name="ram" class="form-control">
                                        {% for option in ram_option2 %}
                                            <option value="{{ option }}">{{ option }}</option>
                                        {% empty %}
                                            <option value="">No ram available</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <!-- <div class="col-md-6 col-lg-4">
                                    <label for="ram_qty" class="form-label">Qty</label>
                                    <input type="number" id="ram_qty" name="ram_qty" class="form-control"
                                        value="{{ form.ram_qty.value }}">
                                </div> -->
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6 col-lg-9">
                                    <label for="hdd" class="form-label">
                                        HDD Details
                                    </label>
                                    <select id="hdd" name="hdd" class="form-control">
                                        {% for option in hdd_option2 %}
                                            <option value="{{ option }}">{{ option }}</option>
                                        {% empty %}
                                            <option value="">No hdd available</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <!-- <div class="col-md-6 col-lg-4">
                                    <label for="hdd_qty" class="form-label">Qty</label>
                                    <input type="number" id="hdd_qty" name="hdd_qty" class="form-control"
                                        value="{{ form.hdd_qty.value }}">
                                </div> -->
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6 col-lg-9">
                                    <label for="ssd" class="form-label">
                                        SSD Details
                                    </label>
                                    <select id="ssd" name="ssd" class="form-control">
                                        {% for option in ssd_option2 %}
                                            <option value="{{ option }}">{{ option }}</option>
                                        {% empty %}
                                            <option value="">No ssd available</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <!-- <div class="col-md-6 col-lg-4">
                                    <label for="ssd_qty" class="form-label">Qty</label>
                                    <input type="number" id="ssd_qty" name="ssd_qty" class="form-control"
                                        value="{{ form.ssd_qty.value }}">
                                </div> -->
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="price" class="form-label">Price</label>
                                    <input type="text" id="price" name="price" class="form-control"
                                        value="{{ form.price.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.price.errors }}</div>
                                </div>

                                <div class="col-md-6">
                                    <label for="{{ form.purchased_type.id_for_label }}" class="form-label" placeholder="Enter Purchase / LOT Code">
                                        Purchase Type
                                    </label>
                                    <input type="text" id="purchased_type" name="purchased_type" class="form-control"
                                        value="{{ form.purchased_type.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.purchased_type.errors }}</div>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="{{ form.purchased_code.id_for_label }}" class="form-label" placeholder="Enter Purchase / LOT Code">
                                        Purchase / LOT Code
                                    </label>
                                    <input type="text" id="purchased_code" name="purchased_code" class="form-control"
                                        value="{{ form.purchased_code.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.purchased_code.errors }}</div>
                                </div>
                            </div>

                            <!-- SMPS Status -->
                            <div class="col-md-6 col-lg-8">
                                <label for="smps_status" class="form-label">SMPS / Adapter Status</label>
                                <select id="smps_status1" name="smps_status" class="form-control" onchange="toggleReplacementDescription1()">
                                    <option value="Available" {% if form.smps_status.value == 'Available' %}selected{% endif %}>Available</option>
                                    <option value="Not_available" {% if form.smps_status.value == 'Not_available' %}selected{% endif %}>Not Available</option>
                                    <option value="replacement" {% if form.smps_status.value == 'replacement' %}selected{% endif %}>Replacement</option>
                                </select>
                                <div class="text-danger">{{ form.smps_status.errors }}</div>
                            </div>



                            <!-- Motherboard Status -->
                            <div class="col-md-6 col-lg-8" id="motherboard_status_div">
                                <label for="motherboard_status" class="form-label">Motherboard Status</label>
                                <select id="motherboard_status1" name="motherboard_status" class="form-control" onchange="toggleMotherboardReplacementDescription1()">
                                    <option value="Available" {% if form.motherboard_status.value == 'Available'%}selected{% endif %}>Available</option>
                                    <option value="Not_available" {% if form.motherboard_status.value == 'Not_available'%}selected{% endif %}>Not Available</option>
                                    <option value="replacement" {% if form.motherboard_status.value == 'replacement'%}selected{% endif %}>Replacement</option>
                                </select>
                                <div class="text-danger">{{ form.motherboard_status.errors }}</div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm mt-5 form-control">
            <div class="text-center">OUT - Remove Installed Parts</div>
            <div class="col-lg-12 col-md-5 h-100">
                <div class="card shadow-sm border-dark form-control h-100 d-flex flex-column" style="background-color: #a9a5b2;">
                    <div class="card-body flex-fill">
                        <form method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="row mb-3">
                                <!-- Product Name and Serial No (Two columns) -->
                                <div class="col-md-6 col-lg-6">
                                    <label for="{{ form.name.id_for_label }}" class="form-label">
                                        Product Name
                                    </label>
                                    <input type="text" name="name" id="product_name" class="form-control"
                                        placeholder="Enter Product Name" value="{{ form.name.value }}">
                                    <div class="text-danger">{{ form.name.errors }}</div>
                                </div>
                                <div class="col-md-6 col-lg-6">
                                    <label for="{{ form.make_and_models.id_for_label }}" class="form-label">
                                        Make & Models
                                    </label>
                                    <input type="text" name="make_and_models" id="make_and_models" class="form-control"
                                        placeholder="Enter Make & Models" value="{{ form.make_and_models.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.make_and_models.errors }}</div>

                                </div>
                            </div>
                            <div class="row mb-3">
                                <!-- Make & Models (Full width, below the first two columns) -->
                                <div class="col-md-12 col-lg-12">
                                    <label for="{{ form.serialno.id_for_label }}" class="form-label">
                                        Serial No
                                    </label>
                                    <input type="text" name="serialno" id="serial_no" class="form-control"
                                        placeholder="Enter Serial Number" value="{{ form.serialno.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.serialno.errors }}</div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <!-- Reduced width for Processor, RAM, HDD, and SSD details -->
                                <div class="col-md-6 col-lg-9">
                                    <label for="processor" class="form-label">Processor</label>
                                    <select id="processor" name="processor" class="form-control">
                                        <option value="">-- Select Processor --</option>
                                        {% for option in processor_option2 %}
                                            <option value="{{ option }}">{{ option }}</option>
                                        {% empty %}
                                        <option value="">No processors available</option>
                                        {% endfor %}
                                    </select>
                                    <div class="text-danger">{{ form.processor.errors }}</div>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                    <label for="processor_qty" class="form-label">Qty</label>
                                    <input type="text" id="processor_qty" name="processor_qty" class="form-control"
                                        value="{{ form.processor_qty.value }}">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6 col-lg-9">
                                    <label for="ram" class="form-label">
                                        RAM Details
                                    </label>
                                    <select id="ram" name="ram" class="form-control">
                                        <option value="">-- Select Ram --</option>
                                        {% for option in ram_option2 %}
                                            <option value="{{ option }}">{{ option }}</option>
                                        {% empty %}
                                            <option value="">No ram available</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="col-md-6 col-lg-3">
                                    <label for="ram_qty" class="form-label">Qty</label>
                                    <input type="text" id="ram_qty" name="ram_qty" class="form-control"
                                        value="{{ form.ram_qty.value }}">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6 col-lg-9">
                                    <label for="hdd" class="form-label">
                                        HDD Details
                                    </label>
                                    <select id="hdd" name="hdd" class="form-control">
                                        <option value="">-- Select Hdd --</option>
                                        {% for option in hdd_option2 %}
                                            <option value="{{ option }}">{{ option }}</option>
                                        {% empty %}
                                            <option value="">No hdd available</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="col-md-6 col-lg-3">
                                    <label for="hdd_qty" class="form-label">Qty</label>
                                    <input type="text" id="hdd_qty" name="hdd_qty" class="form-control"
                                        value="{{ form.hdd_qty.value }}">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6 col-lg-9">
                                    <label for="ssd" class="form-label">
                                        SSD Details
                                    </label>
                                    <select id="ssd" name="ssd" class="form-control">
                                        <option value="">-- Select Sdd --</option>
                                        {% for option in ssd_option2 %}
                                            <option value="{{ option }}">{{ option }}</option>
                                        {% empty %}
                                            <option value="">No ssd available</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                    <label for="ssd_qty" class="form-label">Qty</label>
                                    <input type="text" id="ssd_qty" name="ssd_qty" class="form-control"
                                        value="{{ form.ssd_qty.value }}">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="price" class="form-label">Price</label>
                                    <input type="text" id="price" name="price" class="form-control"
                                        value="{{ form.price.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.price.errors }}</div>
                                </div>

                                <div class="col-md-6">
                                    <label for="{{ form.purchased_type.id_for_label }}" class="form-label" placeholder="Enter Purchase / LOT Code">
                                        Purchase Type
                                    </label>
                                    <input type="text" id="purchased_type" name="purchased_type" class="form-control"
                                        value="{{ form.purchased_type.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.purchased_type.errors }}</div>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="{{ form.purchased_code.id_for_label }}" class="form-label" placeholder="Enter Purchase / LOT Code">
                                        Purchase / LOT Code
                                    </label>
                                    <input type="text" id="purchased_code" name="purchased_code" class="form-control"
                                        value="{{ form.purchased_code.value }}"  style="background-color: #060606;" readonly>
                                    <div class="text-danger">{{ form.purchased_code.errors }}</div>
                                </div>
                            </div>

                            <!-- SMPS Status -->
                            <div class="col-md-6 col-lg-8">
                                <label for="smps_status" class="form-label">SMPS / Adapter Status</label>
                                <select id="smps_status1" name="smps_status" class="form-control" onchange="toggleReplacementDescription1()">
                                    <option value="NA" {% if form.smps_status.value == 'NA' %}selected{% endif %}>NA</option>
                                    <option value="available" {% if form.smps_status.value == 'available' %}selected{% endif %}>Available</option>
                                    <option value="not available" {% if form.smps_status.value == 'not available' %}selected{% endif %}>Not Available</option>
                                    <option value="Replacement" {% if form.smps_status.value == 'Replacement' %}selected{% endif %}>Replacement</option>
                                </select>
                                <div class="text-danger">{{ form.smps_status.errors }}</div>
                            </div>



                            <!-- Motherboard Status -->
                            <div class="col-md-6 col-lg-8" id="motherboard_status_div">
                                <label for="motherboard_status" class="form-label">Motherboard Status</label>
                                <select id="motherboard_status1" name="motherboard_status" class="form-control" onchange="toggleMotherboardReplacementDescription1()">
                                    <option value="NA" {% if form.motherboard_status.value == 'NA' %}selected{% endif %}>NA</option>
                                    <option value="available" {% if form.motherboard_status.value == 'available' %}selected{% endif %}>Available</option>
                                    <option value="not available" {% if form.motherboard_status.value == 'not available' %}selected{% endif %}>Not Available</option>
                                    <option value="Replacement" {% if form.motherboard_status.value == 'Replacement' %}selected{% endif %}>Replacement</option>
                                </select>
                                <div class="text-danger">{{ form.motherboard_status.errors }}</div>
                            </div>

                            <br>
                            <div class="form-group text-center">
                                <button class="btn btn-success btn-lg form-control" name="button3"  type="submit">
                                    <i class="fas fa-check"></i> Submit
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    function filterProcessorsByGeneration() {
        var selectedGen = document.getElementById("processor_generation").value;
        var processorSelect = document.getElementById("processor");
        var options = processorSelect.options;

        for (var i = 0; i < options.length; i++) {
            var opt = options[i];
            var gen = opt.getAttribute("data-generation");
            
            if (!selectedGen || gen === selectedGen) {
                opt.style.display = "";
            } else {
                opt.style.display = "none";
            }
        }

        // Optionally reset selection
        processorSelect.selectedIndex = 0;
    }

    function filterComponentBySizeram() {
    var selectedSize = document.getElementById("ram_size").value;
    var ramSelect = document.getElementById("ram");
    var options = ramSelect.options;

    for (var i = 0; i < options.length; i++) {
        var opt = options[i];
        var size = opt.getAttribute("data-size");

        if (!selectedSize || size === selectedSize) {
            opt.style.display = "";
        } else {
            opt.style.display = "none";
        }
    }

    // Optionally reset selection
    ramSelect.selectedIndex = 0;
    }

    function filterComponentBySizehdd() {
    var selectedSize = document.getElementById("hdd_size").value;
    var ramSelect = document.getElementById("hdd");
    var options = ramSelect.options;

    for (var i = 0; i < options.length; i++) {
        var opt = options[i];
        var size = opt.getAttribute("data-size");

        if (!selectedSize || size === selectedSize) {
            opt.style.display = "";
        } else {
            opt.style.display = "none";
        }
    }

    // Optionally reset selection
    ramSelect.selectedIndex = 0;
    }

    function filterComponentBySizessd() {
    var selectedSize = document.getElementById("ssd_size").value;
    var ramSelect = document.getElementById("ssd");
    var options = ramSelect.options;

    for (var i = 0; i < options.length; i++) {
        var opt = options[i];
        var size = opt.getAttribute("data-size");

        if (!selectedSize || size === selectedSize) {
            opt.style.display = "";
        } else {
            opt.style.display = "none";
        }
    }

    // Optionally reset selection
    ramSelect.selectedIndex = 0;
    }


    


    // Toggle the replacement description fields
    function toggleReplacementDescription() {
        var smpsStatus = document.getElementById("smps_status").value;
        var replacementDescriptionDiv = document.getElementById("smps_replacement_description_div");
        replacementDescriptionDiv.style.display = smpsStatus === "replacement" ? "block" : "none";
    }

    function toggleMotherboardReplacementDescription() {
        var motherboardStatus = document.getElementById("motherboard_status").value;
        var toggleMotherboardReplacementDescriptionDiv = document.getElementById("motherboard_replacement_description_div");
        toggleMotherboardReplacementDescriptionDiv.style.display = motherboardStatus === "replacement" ? "block" : "none";
    }

    function toggleReplacementDescription1() {
        var smpsStatus = document.getElementById("smps_status1").value;
        var replacementDescriptionDiv = document.getElementById("smps_replacement_description_div1");
        replacementDescriptionDiv.style.display = smpsStatus === "replacement" ? "block" : "none";
    }

    function toggleMotherboardReplacementDescription1() {
        var motherboardStatus = document.getElementById("motherboard_status1").value;
        var toggleMotherboardReplacementDescriptionDiv = document.getElementById("motherboard_replacement_description_div1");
        toggleMotherboardReplacementDescriptionDiv.style.display = motherboardStatus === "replacement" ? "block" : "none";
    }

    function toggleReplacementDescription2() {
        var smpsStatus = document.getElementById("smps_status2").value;
        var replacementDescriptionDiv = document.getElementById("smps_replacement_description_div2");
        replacementDescriptionDiv.style.display = smpsStatus === "replacement" ? "block" : "none";
    }

    function toggleMotherboardReplacementDescription2() {
        var motherboardStatus = document.getElementById("motherboard_status2").value;
        var toggleMotherboardReplacementDescriptionDiv = document.getElementById("motherboard_replacement_description_div2");
        toggleMotherboardReplacementDescriptionDiv.style.display = motherboardStatus === "replacement" ? "block" : "none";
    }

    function searchSuggestions(inputId, suggestionsId) {
        const searchBox = document.getElementById(inputId);
        const suggestionsBox = document.getElementById(suggestionsId);

        searchBox.addEventListener('input', function () {
            const query = searchBox.value;
            if (query.length >= 2) { // trigger after at least 2 characters
                fetch(`/search-suggestions/?q=${query}`)
                    .then(response => response.json())
                    .then(data => {
                        suggestionsBox.innerHTML = ''; // Clear previous suggestions
                        if (data.suggestions.length > 0) {
                            data.suggestions.forEach(suggestion => {
                                const item = document.createElement('a');
                                item.href = "javascript:void(0);"; // Prevent immediate navigation
                                item.classList.add('list-group-item', 'list-group-item-action');
                                item.textContent = suggestion;
                                item.addEventListener('click', function () {
                                    searchBox.value = suggestion; // Fill input with clicked suggestion
                                    suggestionsBox.innerHTML = ''; // Hide suggestions
                                });
                                suggestionsBox.appendChild(item);
                            });
                        } else {
                            const noResultsItem = document.createElement('a');
                            noResultsItem.classList.add('list-group-item', 'list-group-item-action', 'text-danger');
                            noResultsItem.textContent = 'No suggestions found! Click here to add item';
                            noResultsItem.style.cursor = 'pointer'; // Make it look clickable
                            noResultsItem.addEventListener('click', function () {
                                window.location.href = "{% url 'category-create' %}"; // Redirect to add item form
                            });
                            suggestionsBox.appendChild(noResultsItem);
                        }
                    })
                    .catch(error => console.error('Error fetching suggestions:', error));
            } else {
                suggestionsBox.innerHTML = ''; // Clear suggestions if input is less than 2 characters
            }
        });
    }
    // Initialize search suggestions for each input field (Processor, RAM, HDD, SSD)
    searchSuggestions('searchbox', 'suggestions');
    searchSuggestions('searchbox1', 'suggestions1');
    searchSuggestions('searchbox2', 'suggestions2');
    searchSuggestions('searchbox3', 'suggestions3');
</script>

{% endblock content %}
{% extends "store/base.html" %}
{% load static %}

{% block title %}Update Product{% endblock title %}

{% block content %}
<style>
    body {
        background-color: #121212;
        color: #e0e0e0;
    }

    .card {
        background-color: #1c1c1c;
        border: 1px solid #2e2e2e;
        border-radius: 12px;
        color: #e0e0e0;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    }

    .card-body {
        padding: 2rem;
    }

    label.form-label {
        color: #bdbdbd;
        font-weight: 500;
        text-transform: uppercase;
        font-size: 0.9rem;
        margin-bottom: 6px;
    }

    input.form-control,
    select.form-control,
    textarea.form-control {
        background-color: #222;
        border: 1px solid #333;
        color: #f5f5f5;
        border-radius: 8px;
        padding: 10px 12px;
        transition: all 0.25s ease;
    }

    input.form-control::placeholder,
    textarea.form-control::placeholder {
        color: #999;
    }

    input.form-control:focus,
    select.form-control:focus,
    textarea.form-control:focus {
        background-color: #1a1a1a;
        border-color: #1e01fa;
        box-shadow: 0 0 8px rgba(75, 1, 248, 0.4);
        color: #fff;
    }

    .btn-success {
        background: linear-gradient(135deg, #00e676, #1de9b6);
        border: none;
        border-radius: 50px;
        color: #fff;
        font-weight: 600;
        padding: 0.6rem 1.5rem;
        transition: all 0.25s ease;
    }

    .btn-success:hover {
        background: linear-gradient(135deg, #00ffc8, #00bfa5);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(76,175,80,0.4);
    }

    .btn-primary {
        background: linear-gradient(135deg, #1976d2, #0d47a1);
        border: none;
        color: #fff;
        border-radius: 40px;
        transition: all 0.25s ease;
    }

    .btn-primary:hover {
        background: linear-gradient(135deg, #2196f3, #1565c0);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(33,150,243,0.4);
    }

    .text-danger {
        font-size: 0.85rem;
        color: #ff5252 !important;
    }

    .form-control:disabled,
    .form-control[readonly] {
        background-color: #2a2a2a;
        color: #aaa;
    }

    #customer_suggestions {
        background-color: #1f1f1f;
        border: 1px solid #333;
        border-radius: 6px;
        margin-top: 5px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        position: absolute;
        width: 100%;
    }

    #customer_suggestions a {
        display: block;
        padding: 8px 12px;
        color: #ddd;
        text-decoration: none;
    }

    #customer_suggestions a:hover {
        background-color: #333;
        color: #fff;
    }

    .modal-content {
        background-color: #1f1f1f;
        color: #e0e0e0;
        border-radius: 10px;
        border: 1px solid #333;
    }

    .modal-header {
        border-bottom: 1px solid #333;
    }

    .modal-footer {
        border-top: 1px solid #333;
    }

    .alert-success {
        background-color: #2e7d32;
        color: #fff;
        border: none;
    }

    .form-section-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: #00ffc8;
        border-left: 4px solid #00ffc8;
        padding-left: 10px;
        margin-bottom: 1rem;
        margin-top: 2rem;
    }

    /* Responsiveness */
    @media (max-width: 767.98px) {
        .card-body {
            padding: 1rem;
        }
        .btn-success {
            width: 100%;
        }
    }
</style>

<br>
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="card">
            <div class="card-body">
                {% if request.user.profile.role != 'OP' %}
                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}

                    <!-- ðŸ§± Product Basic Info -->
                    <h5 class="form-section-title">Product Details</h5>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label for="{{ form.name.id_for_label }}" class="form-label">Product Name</label>
                            {{ form.name }}
                            <div class="text-danger">{{ form.name.errors }}</div>
                        </div>
                        <div class="col-md-4">
                            <label for="id_serialno" class="form-label">Serial No</label>
                            {{ form.serialno }}
                            <div class="text-danger">{{ form.serialno.errors }}</div>
                        </div>
                        <div class="col-md-4">
                            <label for="{{ form.make_and_models.id_for_label }}" class="form-label">Make & Model</label>
                            {{ form.make_and_models }}
                            <div class="text-danger">{{ form.make_and_models.errors }}</div>
                        </div>
                    </div>

                    <!-- âš™ï¸ Components -->
                    <h5 class="form-section-title">Component Configuration</h5>

                    <div class="row mb-3">
                        <div class="col-md-9">
                            <label class="form-label">Processor</label>
                            <input type="text" name="processor" id="processor" class="form-control"
                                value="{{ processor_option3|join:', ' }}"
                                placeholder="e.g. I5 8TH GEN, I7 9TH GEN" style="text-transform: uppercase;">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Qty</label>
                            <input type="text" id="processor_qty" name="processor_qty" class="form-control"
                                value="{{ processor_qty3|join:', ' }}" placeholder="e.g. 2,1">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-9">
                            <label class="form-label">RAM</label>
                            <input type="text" name="ram" id="ram" class="form-control"
                                value="{{ ram_option3|join:', ' }}" placeholder="e.g. 8GB SAMSUNG, 16GB KINGSTON"
                                style="text-transform: uppercase;">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Qty</label>
                            <input type="text" name="ram_qty" id="ram_qty" class="form-control"
                                value="{{ ram_qty3|join:', ' }}" placeholder="e.g. 1,2">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-9">
                            <label class="form-label">HDD</label>
                            <input type="text" name="hdd" id="hdd" class="form-control"
                                value="{{ hdd_option3|join:', ' }}" placeholder="e.g. 1TB SEAGATE, 500GB WD"
                                style="text-transform: uppercase;">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Qty</label>
                            <input type="text" name="hdd_qty" id="hdd_qty" class="form-control"
                                value="{{ hdd_qty3|join:', ' }}" placeholder="e.g. 1,1">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-9">
                            <label class="form-label">SSD</label>
                            <input type="text" name="ssd" id="ssd" class="form-control"
                                value="{{ ssd_option3|join:', ' }}" placeholder="e.g. 256GB KINGSTON, 512GB SAMSUNG"
                                style="text-transform: uppercase;">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Qty</label>
                            <input type="text" name="ssd_qty" id="ssd_qty" class="form-control"
                                value="{{ ssd_qty3|join:', ' }}" placeholder="e.g. 1,2">
                        </div>
                    </div>

                    <!-- ðŸ’° Pricing & Customer -->
                    <h5 class="form-section-title">Pricing & Customer</h5>

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Price</label>
                            {{ form.price }}
                            <div class="text-danger">{{ form.price.errors }}</div>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Purchase / LOT Code</label>
                            {{ form.purchased_code }}
                            <div class="text-danger">{{ form.purchased_code.errors }}</div>
                        </div>
                        <div class="col-md-4 position-relative">
                            <label class="form-label">Customer Name</label>
                            <input type="text" id="customer_searchbox" class="form-control"
                                placeholder="Type to search customer..." autocomplete="off"
                                value="{{ form.instance.customer.get_full_name }}">
                            <div id="customer_suggestions"></div>
                            <input type="hidden" name="customer_id" id="customer_id"
                                value="{{ form.instance.customer.id }}">
                        </div>
                    </div>

                    <!-- âš¡ Components -->
                    <h5 class="form-section-title">Component Status</h5>

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">SMPS / Adapter Status</label>
                            <select name="smps_status" id="id_smps_status" class="form-control">
                                <option value="">Select Status</option>
                                <option value="NA" {% if form.instance.smps_status == 'NA' %}selected{% endif %}>NA</option>
                                <option value="available" {% if form.instance.smps_status == 'available' %}selected{% endif %}>Available</option>
                                <option value="not_available" {% if form.instance.smps_status == 'not_available' %}selected{% endif %}>Not Available</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Motherboard Status</label>
                            <select name="motherboard_status" id="id_motherboard_status" class="form-control">
                                <option value="">Select Status</option>
                                <option value="NA" {% if form.instance.motherboard_status == 'NA' %}selected{% endif %}>NA</option>
                                <option value="available" {% if form.instance.motherboard_status == 'available' %}selected{% endif %}>Available</option>
                                <option value="not_available" {% if form.instance.motherboard_status == 'not_available' %}selected{% endif %}>Not Available</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group text-center mt-4">
                        <button class="btn btn-success btn-lg" type="submit">
                            <i class="fas fa-check me-2"></i>Submit
                        </button>
                    </div>
                </form>
                {% else %}
                <h3 class="text-danger text-center mt-5"><b>Sorry, You Don't Have Permission to Add Product</b></h3>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Keep your JavaScript below (no visual changes needed) -->
{{ block.super }}
{% endblock content %}

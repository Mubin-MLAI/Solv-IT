{% extends "store/base.html" %}
{% load static %}

{% block title %}
Update Product
{% endblock title %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <div class="card shadow-sm border-light">
                <div class="card-body">
                    <!-- <h1 class="text-center mb-4">
                        Update Product
                    </h1> -->
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}

                        <!-- Product Name, Serial No, Make & Models Section -->
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="{{ form.name.id_for_label }}" class="form-label">
                                    Product Name
                                </label>
                                {{ form.name }}
                                <div class="text-danger">{{ form.name.errors }}</div>
                            </div>
                            <div class="col-md-4">
                                <label for="{{ form.serialno.id_for_label }}" class="form-label">
                                    Serial No 
                                </label>
                                <input type="text" name="serialno" id="serial_no" class="form-control" value="{{ form.serialno.value }}" placeholder="Enter Serial Number" readonly>
                                <div class="text-danger">{{ form.serialno.errors }}</div>
                            </div>
                            <div class="col-md-4">
                                <label for="{{ form.make_and_models.id_for_label }}" class="form-label">
                                    Make & Models
                                </label>
                                <input type="text" name="make_and_models" id="make_and_models" class="form-control" value="{{ form.make_and_models.value }}" placeholder="Enter make_and_models" readonly>
                                <div class="text-danger">{{ form.make_and_models.errors }}</div>
                            </div>
                        </div>

                        <!-- Processor, RAM, HDD, SSD Selection Section -->
                        <div class="row mb-3">
                            <div class="col-md-3">
                                <label for="processor" class="form-label">
                                    Processor Details
                                </label>
                                {{ form.processor }}
                                <label for="processor_qty" class="form-label">
                                    Processor Quantity
                                </label>
                                {{ form.processor_qty }}
                            </div>

                            <div class="col-md-3">
                                <label for="ram" class="form-label">
                                    RAM Details
                                </label>
                                {{ form.ram }}
                                <label for="ram_qty" class="form-label">
                                    RAM Quantity
                                </label>
                                {{ form.ram_qty }}
                            </div>

                            <div class="col-md-3">
                                <label for="hdd" class="form-label">
                                    HDD Details
                                </label>
                                {{ form.hdd }}
                                <label for="hdd_qty" class="form-label">
                                    HDD Quantity
                                </label>
                                {{ form.hdd_qty }}
                            </div>

                            <div class="col-md-3">
                                <label for="ssd" class="form-label">
                                    SSD Details
                                </label>
                                {{ form.ssd }}
                                <label for="ssd_qty" class="form-label">
                                    SSD Quantity
                                </label>
                                {{ form.ssd_qty }}
                            </div>
                        </div>

                        <!-- SMPS and Motherboard Status Section -->
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="smps_status" class="form-label">
                                    SMPS Status
                                </label>
                                {{ form.smps_status }}
                                <div class="text-danger">{{ form.smps_status.errors }}</div>
                            </div>

                            <div class="col-md-4">
                                <label for="motherboard_status" class="form-label">
                                    Motherboard Status
                                </label>
                                {{ form.motherboard_status }}
                                <div class="text-danger">{{ form.motherboard_status.errors }}</div>
                            </div>
                        </div>

                        <!-- SMPS and Motherboard Replacement Description Section -->
                        <div class="row mb-3">
                            <div class="col-md-4" id="smps_replacement_description_div" style="display: none;">
                                <label for="smps_replacement_description" class="form-label">
                                    SMPS Replacement Description
                                </label>
                                {{ form.smps_replacement_description }}
                            </div>

                            <div class="col-md-4" id="motherboard_replacement_description_div" style="display: none;">
                                <label for="motherboard_replacement_description" class="form-label">
                                    Motherboard Replacement Description
                                </label>
                                {{ form.motherboard_replacement_description }}
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="form-group text-center">
                            <button class="btn btn-success btn-lg" type="submit">
                                <i class="fas fa-check"></i> Update Product
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Toggle visibility of replacement description fields based on dropdown selection
    function toggleReplacementDescription() {
        var smpsStatus = document.getElementById("smps_status").value;
        var replacementDescriptionDiv = document.getElementById("smps_replacement_description_div");
        replacementDescriptionDiv.style.display = smpsStatus === "replacement" ? "block" : "none";
    }

    function toggleMotherboardReplacementDescription() {
        var motherboardStatus = document.getElementById("motherboard_status").value;
        var motherboardReplacementDescriptionDiv = document.getElementById("motherboard_replacement_description_div");
        motherboardReplacementDescriptionDiv.style.display = motherboardStatus === "replacement" ? "block" : "none";
    }

    // Call on page load to ensure the description fields are correctly shown/hidden
    window.onload = function() {
        toggleReplacementDescription();
        toggleMotherboardReplacementDescription();
    };
</script>

{% endblock content %}
